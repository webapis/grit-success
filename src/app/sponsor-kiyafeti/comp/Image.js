"use client"
import { Typography, Box } from "@mui/material"
import React, { useEffect, useRef } from "react";
import OpenInNewIcon from '@mui/icons-material/OpenInNew';
import Button from '@mui/material/Button';
import extractHostname from "./extractHostname";
const dataURI = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAImCAYAAAB9xNw5AAAAAXNSR0IArs4c6QAAG9RJREFUeF7t3Y2O42QSBdAZ4P0fGAGz8khZheDE9nXcNwVnpNWullS+yqka385f8/3333//8c0fAgQIECBwUOC7ADko5uYECBAg8FNAgFgEAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbIoIECBAQIDYAQIECBCIBARIxKaIAAECBASIHSBAgACBSECARGyKCBAgQECA2AECBAgQiAQESMSmiAABAgQEiB0gQIAAgUhAgERsiggQIEBAgNgBAgQIEIgEBEjEpogAAQIEBIgdIECAAIFIQIBEbLOLfv3112+//PLLzwfx48ePb3/++efP/977Z6ld/vP9+/d/lCz389dff/38z9E/y/3d7vux9sz9Hu3jq2+/POZlJsmfxXmZ37M/v/322+qcts5avP/444+tm/1/Xu/ehc2D3eAjBATIR4zh65q4D4+jAbJcJJb6tYvF2gX/SDA99vVM5N8YJHsf+5rJqwA5E0xbAXLlLnzd3wYnnRUQIGcFB9Wv/aXf+wzkyAXjRrL3vo9eQP9tIXL08d+vXCNArtyFQX+dtPrt2zcB8h9ag7WXM85c5G8vVS338ezlp62XWNZ+Sr4PiGf3u7fvCeN9nMuRl/9uVmuPc+3Z5pGXKp+9NLYWeO/YhQmz0uPfBQTIf2Qjnv2Uu+dCvHaRXy4uaxe6I7dd+0n2WeAcue2kkT4+rq2Xjo48tsdgejazI/d5ZL5HbnukB7f9HAEB8jmzuKyTVy857AmQtZ+QX71x+xhWz0Lh8QKzdfFcu/2R91kuAz5xx4+PaesZ25Gj7ue2Z8577vuqXdhzttt8noAA+byZvL2jxwvJcsDtjfCtC8vaT8hbF+29NUcvRkvfV/xU/XbwA3e4N2wP3OXPmy4zWKxuf7bCec/9753r/X0lNXt6cZvPEBAgnzGHy7p4vEAtF//7j+BuBcjRZwm3B7J27v1LXumF5cqf2C8bwos73nJKe7rC6apdSB+jur6AAOnP4LIOnl1Ejry0kf6EvFWXXozSukfkZ59I2/ruw5mPQa8N+sgsjizKFcG0NdNn/aV1Rx6v23YEBEjH/fJTX/2Ef+Silb5ktHWhTy8q6TOXNfC1N3mPfiz2zBvTzx7L7Rni4/dtjnx8eS1AFoO1L4Au93u771ef0rpqFy7/y+CAywQEyGW03Tt+9RPo5ABZVNML2dpE9j6juOJTYGsh+64vab563+vVZr4KxNR964eJ7t8Up58RECBn9D60duv1770Bcuan/a2Pp6bPQN4dIHtfynq8eG69d7RnNc5+U/zZr4xJvuh33+/as7Ard2GPldt8poAA+cy5xF3t+YveCpD7T28ln8C6oZypTV7KWvsOzZmXrm49PPtuznIBv72ktMzz9mXKtZe01j4R9yyY7l+mWv737eWs2+9FexUie/bq2dKeqY3/Iij8EgEB8iXMX3fInjdPBcg/5/HspazbxW/rJ/RkwmvPal79Isq979k8+6b4s+/uPHsWdh9OZ0LgTG3iqubrBATI11lfftLWS1drP8G/einmzF/8rdozzyLO1O79KXm53e0N5fuf/N/xfYpnz0D2PKtZC4flk2P3b37ffqPxre89X07cCqeteb5a7jO1l/+lccApAQFyiu9zio/8JfUMZH1uW+9JvON9j7Mbc8Wb+c8C7T4sj+zX42M8U3vWS/21AgLkWt8vu/c9L115BrI9jle/GXfPM4TtE87fYu3ltq3vr+w59dWvijkTAmdq9/TtNj0BAdKzf9vJRz/RtPcZyNLgkdveP6Apn8JaG8Laby3e8zLQ2wa6cUdXBcjas5v70LxqF77KzTnvFxAg7zf90ntMfro7ciG46rP/R0PvHjXtae9gjr4Jvfd+33W7q75XcSRAlsey9xnZVf2+y9P95AICJLf7iMpXL7kkDT6+SZxerLcuGmmAJIF5xOGV56c8C/mEZyAC5MhW/XtvK0CGz/bqAEkv9Ft1WwHzbCxp3Z4xb30B791vot++47H0dvt1Inv63BMg99/t2PsvqHr1HsjS19ZMn/We1u2xcJuugADp+p8+/eoA2fvR4McHsvXMJX0mceXFaO17GcvjuuJjvHtC4NlyvPoY89onyR4/5puG81W7cPovgTuoCQiQGv17Dr7/KXbvPT7+Qr37L5g9/iScXOj31myFzNrjueI7IGs/Xd+ebdz+2X2IvOOlrK2f9p/NculjMbj/c/9exNb7GK92ZMt271zvz0hq9u6x2/UFBEh/Bl/ewZE30Zfmti4sjw9g70/XRy+iR2+/F3bruxVX/CqTrTP3PvtY+2Jj8nu79j7Gq3Zh76zc7rMEBMhnzeNLujkaIGsvi1z170R/9k3v9IK7B3Ttgvv4vYo9t9lz1v1t9l60bzV7b7/1rfLHPo/c/qpdOGrn9p8hIEA+Yw5f2sXRAFl7iWf5/26/t2m56C8X+Nuv0Lh/MFsv96xdkO7/vRfP7vddb2g/+x1Yj/9ejCMX2b3DfPam/ePjvxncv4x283/2+63Wwmbtlyk+vpy53O+W7bOPOd9+CWS6C3vd3O5zBATI58ziyzpJAmTrE0przW9diF79ZP0K48i/WOnV/RwNhb3PAI4MMnG9XeS3vn2+9oXIrd72zCzpec/9bvXmn3+egAD5vJlc3lESIEtTRy4cRy8Yez9N9q7wWHsse35RYvL+wtZAj7huPfN4PGuv655nHvf3faTno7uw5eWff46AAPmcWXxZJ2mA3Bp8/G2v942fucA/e+njdnG7/2TUWay9L109nnP0WcuRPrdc71+COnK/9y+BPb4MdrN99Wvkt57Frb0MdvZ+jzw+t+0JCJCevZMJECAwWkCAjB6f5gkQINATECA9eycTIEBgtIAAGT0+zRMgQKAnIEB69k4mQIDAaAEBMnp8midAgEBPQID07J1MgACB0QICZPT4NE+AAIGegADp2TuZAAECowUEyOjxaZ4AAQI9AQHSs3cyAQIERgsIkNHj0zwBAgR6AgKkZ+9kAgQIjBYQIKPHp3kCBAj0BARIz97JBAgQGC0gQEaPT/MECBDoCQiQnr2TCRAgMFpAgIwen+YJECDQExAgPXsnEyBAYLSAABk9Ps0TIECgJyBAevZOJkCAwGgBATJ6fJonQIBAT0CA9OydTIAAgdECAmT0+DRPgACBnoAA6dk7mQABAqMFBMjo8WmeAAECPQEB0rN3MgECBEYLCJDR49M8AQIEegICpGfvZAIECIwWECCjx6d5AgQI9AQESM/eyQQIEBgtIEBGj0/zBAgQ6AkIkJ69kwkQIDBaQICMHp/mCRAg0BMQID17JxMgQGC0gAAZPT7NEyBAoCcgQHr2TiZAgMBoAQEyenyaJ0CAQE9AgPTsnUyAAIHRAgJk9Pg0T4AAgZ6AAOnZO5kAAQKjBQTI6PFpngABAj0BAdKzdzIBAgRGCwiQ0ePTPAECBHoCAqRn72QCBAiMFhAgo8eneQIECPQEBEjP3skECBAYLSBARo9P8wQIEOgJCJCevZMJECAwWkCAjB6f5gkQINATECA9eycTIEBgtIAAGT0+zRMgQKAnIEB69k4mQIDAaAEBMnp8midAgEBPQID07J1MgACB0QICZPT4NE+AAIGegADp2TuZAAECowUEyOjxaZ4AAQI9AQHSs3cyAQIERgsIkNHj0zwBAgR6AgKkZ+9kAgQIjBYQIKPHp3kCBAj0BARIz97JBAgQGC0gQEaPT/MECBDoCQiQnr2TCRAgMFpAgIwen+YJECDQExAgPXsnEyBAYLSAABk9Ps0TIECgJyBAevZOJkCAwGgBATJ6fJonQIBAT0CA9OydTIAAgdECAmT0+DRPgACBnoAA6dk7mQABAqMFBMjo8WmeAAECPQEB0rN3MgECBEYLCJDR49M8AQIEegICpGfvZAIECIwWECCjx6d5AgQI9AQESM/eyQQIEBgtIEBGj0/zBAgQ6AkIkJ69kwkQIDBaQICMHp/mCRAg0BMQID17JxMgQGC0gAAZPT7NEyBAoCcgQHr2TiZAgMBoAQEyenyaJ0CAQE9AgPTsnUyAAIHRAgJk9Pg0T4AAgZ6AAOnZO5kAAQKjBQTI6PFpngABAj0BAdKzdzIBAgRGCwiQ0ePTPAECBHoCAqRn72QCBAiMFhAgo8eneQIECPQEBEjP3skECBAYLSBARo9P8wQIEOgJCJCevZMJECAwWkCAjB6f5gkQINATECA9eycTIEBgtIAAGT0+zRMgQKAnIEB69k4mQIDAaAEBMnp8midAgEBPQID07J1MgACB0QICZPT4NE+AAIGegADp2TuZAAECowUEyOjxaZ4AAQI9AQHSs3cyAQIERgsIkNHj0zwBAgR6AgKkZ+9kAgQIjBYQIKPHp3kCBAj0BARIz97JBAgQGC0gQEaPT/MECBDoCQiQnr2TCRAgMFpAgIwen+YJECDQExAgPXsnEyBAYLSAABk9Ps0TIECgJyBAevZOJkCAwGgBATJ6fJonQIBAT0CA9OydTIAAgdECAmT0+DRPgACBnoAA6dk7mQABAqMFBMjo8WmeAAECPQEB0rN3MgECBEYLCJDR49M8AQIEegICpGfvZAIECIwWECCjx6d5AgQI9AQESM/eyQQIEBgtIEBGj0/zBAgQ6AkIkJ69kwkQIDBaQICMHp/mCRAg0BMQID17JxMgQGC0gAAZPT7NEyBAoCcgQHr2TiZAgMBoAQEyenyaJ0CAQE9AgPTsnUyAAIHRAgJk9Pg0T4AAgZ6AAOnZO5kAAQKjBQTI6PFpngABAj0BAdKzdzIBAgRGCwiQ0ePTPAECBHoCAqRn72QCBAiMFhAgo8eneQIECPQEBEjP3skECBAYLSBARo9P8wQIEOgJCJCevZMJECAwWkCAjB6f5gkQINATECA9eycTIEBgtIAAGT0+zRMgQKAnIEB69k4mQIDAaAEBMnp8midAgEBPQID07J1MgACB0QICZPT4NE+AAIGegADp2TuZAAECowUEyOjxaZ4AAQI9AQHSs3cyAQIERgsIkNHj0zwBAgR6AgKkZ+9kAgQIjBYQIKPHp3kCBAj0BARIz97JBAgQGC0gQEaPT/MECBDoCQiQnr2TCRAgMFpAgIwen+YJECDQExAgPXsnEyBAYLSAABk9Ps0TIECgJyBAevZOJkCAwGgBATJ6fJonQIBAT0CA9OydTIAAgdECAmT0+DRPgACBnoAA6dk7mQABAqMFBMjo8WmeAAECPQEB0rN3MgECBEYLCJDR49M8AQIEegICpGfvZAIECIwWECCjx6d5AgQI9AQESM/eyQQIEBgtIEBGj0/zBAgQ6AkIkJ69kwkQIDBaQICMHp/mCRAg0BMQID17JxMgQGC0gAAZPT7NEyBAoCcgQHr2TiZAgMBoAQEyenyaJ0CAQE9AgPTsnUyAAIHRAgJk9Pg0T4AAgZ6AAOnZO5kAAQKjBQTI6PFpngABAj0BAdKzdzIBAgRGCwiQ0ePTPAECBHoCAqRn72QCBAiMFhAgo8eneQIECPQEBEjP3skECBAYLSBARo9P8wQIEOgJCJCevZMJECAwWkCAjB6f5gkQINATECA9eycTIEBgtIAAGT0+zRMgQKAnIEB69k4mQIDAaAEBMnp8midAgEBPQID07J1MgACB0QICZPT4NE+AAIGegADp2TuZAAECowUEyOjxaZ4AAQI9AQHSs3cyAQIERgsIkNHj0zwBAgR6AgKkZ+9kAgQIjBYQIKPHp3kCBAj0BARIz97JBAgQGC0gQEaPT/MECBDoCQiQnr2TCRAgMFpAgIwen+YJECDQExAgPXsnEyBAYLSAABk9Ps0TIECgJyBAevZOJkCAwGgBATJ6fJonQIBAT0CA9OydTIAAgdECAmT0+DRPgACBnoAA6dk7mQABAqMFBMjo8WmeAAECPQEB0rN3MgECBEYLCJDR49M8AQIEegICpGfvZAIECIwWECCjx6d5AgQI9AQESM/eyQQIEBgtIEBGj0/zBAgQ6AkIkJ69kwkQIDBaQICMHp/mCRAg0BMQID17JxMgQGC0gAAZPT7NEyBAoCcgQHr2TiZAgMBoAQEyenyaJ0CAQE9AgPTsnUyAAIHRAgJk9Pg0T4AAgZ6AAOnZO5kAAQKjBQTI6PFpngABAj0BAdKzdzIBAgRGCwiQ0ePTPAECBHoCAqRn72QCBAiMFhAgo8eneQIECPQEBEjP3skECBAYLSBARo9P8wQIEOgJCJCevZMJECAwWkCAjB6f5gkQINATECA9eycTIEBgtIAAGT0+zRMgQKAnIEB69k4mQIDAaAEBMnp8midAgEBPQID07J1MgACB0QICZPT4NE+AAIGegADp2TuZAAECowUEyOjxaZ4AAQI9AQHSs3cyAQIERgsIkNHj0zwBAgR6AgKkZ+9kAgQIjBYQIKPHp3kCBAj0BARIz97JBAgQGC0gQEaPT/MECBDoCQiQnr2TCRAgMFpAgIwen+YJECDQExAgPXsnEyBAYLSAABk9Ps0TIECgJyBAevZOJkCAwGgBATJ6fJonQIBAT0CA9OydTIAAgdECAmT0+DRPgACBnsD/AAdMP1RTjlc+AAAAAElFTkSuQmCC"
export default function Image({ image, title, link, marka, price, currency, handleSelect, obj }) {
  const imageEl = useRef(null);
  useEffect(() => {
    imageEl.current.src = dataURI;
    if (window.IntersectionObserver) {
      let observer = new IntersectionObserver(
        (entries, observer) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.src = entry.target.dataset.src;
              observer.unobserve(entry.target);
            }
          });
        },
        {
          root: null,
          rootMargin: "0px",
          threshold: 0,
        }
      );
      observer.observe(imageEl.current);
    }
  }, []);
  let currentPrice = currency === 'TL' ? new Intl.NumberFormat('tr-TR', {
    style: 'currency',
    currency: 'TRY',
  }).format(price) : new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
  }).format(price)


  return <Box  >
    {
      <img onClick={() => handleSelect(obj)} ref={imageEl} onError={(e) => (e.target.src = dataURI)}
        src={dataURI} data-src={image[0]} style={{ width: '100%', height: '100%' }} />
    }
    <Button size="small" component='a' href={link} target="_blank" sx={{
      textTransform: 'lowercase', '&:hover': {
        textDecoration: 'underline'
      }
    }} endIcon={<OpenInNewIcon />}>{extractHostname(link).replace('www.', '').replace('clothing.', '')}</Button>



    <Typography variant="body2" color="text.secondary">{price > 0 ? currentPrice : ''}</Typography>


    <Typography variant="body2" color="text.secondary" sx={{ textTransform: 'capitalize' }}>
      {title}
    </Typography>




  </Box>


}


